import{a as J,t as X}from"./index.CtQOET4A.js";import{w as B,x as P,y as G,z as Z}from"./scheduler.BnfoKW8w.js";import{w as U,r as N}from"./index.BAGjFq3d.js";function ce(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function le(e,t){e.d(1),t.delete(e.key)}function ee(e,t){X(e,1,1,()=>{t.delete(e.key)})}function de(e,t){e.f(),ee(e,t)}function fe(e,t,f,v,b,s,n,l,u,d,m,$){let r=e.length,E=s.length,p=r;const y={};for(;p--;)y[e[p].key]=p;const o=[],L=new Map,T=new Map,x=[];for(p=E;p--;){const a=$(b,s,p),w=f(a);let i=n.get(w);i?x.push(()=>i.p(a,t)):(i=d(w,a),i.c()),L.set(w,o[p]=i),w in y&&T.set(w,Math.abs(p-y[w]))}const S=new Set,h=new Set;function k(a){J(a,1),a.m(l,m),n.set(a.key,a),m=a.first,E--}for(;r&&E;){const a=o[E-1],w=e[r-1],i=a.key,c=w.key;a===w?(m=a.first,r--,E--):L.has(c)?!n.has(i)||S.has(i)?k(a):h.has(c)?r--:T.get(i)>T.get(c)?(h.add(i),k(a)):(S.add(c),r--):(u(w,n),r--)}for(;r--;){const a=e[r];L.has(a.key)||u(a,n)}for(;E;)k(o[E-1]);return B(x),o}const te=U(void 0);function pe(e,t){const{computePosition:f,autoUpdate:v,offset:b,shift:s,flip:n,arrow:l,size:u,autoPlacement:d,hide:m,inline:$}=P(te),r={open:!1,autoUpdateCleanup:()=>{}},E=':is(a[href], button, input, textarea, select, details, [tabindex]):not([tabindex="-1"])';let p;const y="https://www.skeleton.dev/utilities/popups";let o,L;function T(){o=document.querySelector(`[data-popup="${t.target}"]`)??document.createElement("div"),L=o.querySelector(".arrow")??document.createElement("div")}T();function x(){var c,M,I,_,g,z,C,F;if(!o)throw new Error(`The data-popup="${t.target}" element was not found. ${y}`);if(!f)throw new Error(`Floating UI 'computePosition' not found for data-popup="${t.target}". ${y}`);if(!b)throw new Error(`Floating UI 'offset' not found for data-popup="${t.target}". ${y}`);if(!s)throw new Error(`Floating UI 'shift' not found for data-popup="${t.target}". ${y}`);if(!n)throw new Error(`Floating UI 'flip' not found for data-popup="${t.target}". ${y}`);if(!l)throw new Error(`Floating UI 'arrow' not found for data-popup="${t.target}". ${y}`);const i=[];u&&i.push(u((c=t.middleware)==null?void 0:c.size)),d&&i.push(d((M=t.middleware)==null?void 0:M.autoPlacement)),m&&i.push(m((I=t.middleware)==null?void 0:I.hide)),$&&i.push($((_=t.middleware)==null?void 0:_.inline)),f(e,o,{placement:t.placement??"bottom",middleware:[b(((g=t.middleware)==null?void 0:g.offset)??8),s(((z=t.middleware)==null?void 0:z.shift)??{padding:8}),n((C=t.middleware)==null?void 0:C.flip),l(((F=t.middleware)==null?void 0:F.arrow)??{element:L||null}),...i]}).then(({x:K,y:V,placement:W,middlewareData:Y})=>{if(Object.assign(o.style,{left:`${K}px`,top:`${V}px`}),L){const{x:q,y:O}=Y.arrow,H={top:"bottom",right:"left",bottom:"top",left:"right"}[W.split("-")[0]];Object.assign(L.style,{left:q!=null?`${q}px`:"",top:O!=null?`${O}px`:"",right:"",bottom:"",[H]:"-4px"})}})}function S(){o&&(r.open=!0,t.state&&t.state({state:r.open}),x(),o.style.display="block",o.style.opacity="1",o.style.pointerEvents="auto",o.removeAttribute("inert"),r.autoUpdateCleanup=v(e,o,x),p=Array.from(o==null?void 0:o.querySelectorAll(E)))}function h(i){if(!o)return;const c=parseFloat(window.getComputedStyle(o).transitionDuration.replace("s",""))*1e3;setTimeout(()=>{r.open=!1,t.state&&t.state({state:r.open}),o.style.opacity="0",o.setAttribute("inert",""),r.autoUpdateCleanup&&r.autoUpdateCleanup(),i&&i()},c)}function k(){r.open===!1?S():h()}function a(i){if(r.open===!1||e.contains(i.target))return;if(o&&o.contains(i.target)===!1){h();return}const c=t.closeQuery===void 0?"a[href], button":t.closeQuery;if(c==="")return;const M=o==null?void 0:o.querySelectorAll(c);M==null||M.forEach(I=>{I.contains(i.target)&&h()})}const w=i=>{if(r.open===!1)return;const c=i.key;if(c==="Escape"){i.preventDefault(),e.focus(),h();return}p=Array.from(o==null?void 0:o.querySelectorAll(E)),r.open&&document.activeElement===e&&(c==="ArrowDown"||c==="Tab")&&E.length>0&&p.length>0&&(i.preventDefault(),p[0].focus())};switch(t.event){case"click":e.addEventListener("click",k,!0),window.addEventListener("click",a,!0);break;case"hover":e.addEventListener("mouseover",S,!0),e.addEventListener("mouseleave",()=>h(),!0);break;case"focus-blur":e.addEventListener("focus",k,!0),e.addEventListener("blur",()=>h(),!0);break;case"focus-click":e.addEventListener("focus",S,!0),window.addEventListener("click",a,!0);break;default:throw new Error(`Event value of '${t.event}' is not supported. ${y}`)}return window.addEventListener("keydown",w,!0),x(),{update(i){h(()=>{t=i,x(),T()})},destroy(){e.removeEventListener("click",k,!0),e.removeEventListener("mouseover",S,!0),e.removeEventListener("mouseleave",()=>h(),!0),e.removeEventListener("focus",k,!0),e.removeEventListener("focus",S,!0),e.removeEventListener("blur",()=>h(),!0),window.removeEventListener("click",a,!0),window.removeEventListener("keydown",w,!0)}}}const ne={message:"Missing Toast Message",autohide:!0,timeout:5e3},R="toastStore";function we(){const e=Z(R);if(!e)throw new Error("toastStore is not initialized. Please ensure that `initializeStores()` is invoked in the root layout file of this app!");return e}function me(){const e=ie();return G(R,e)}function oe(){const e=Math.random();return Number(e).toString(32)}function ie(){const{subscribe:e,set:t,update:f}=U([]),v=s=>f(n=>{if(n.length>0){const l=n.findIndex(d=>d.id===s),u=n[l];u&&(u.callback&&u.callback({id:s,status:"closed"}),u.timeoutId&&clearTimeout(u.timeoutId),n.splice(l,1))}return n});function b(s){if(s.autohide===!0)return setTimeout(()=>{v(s.id)},s.timeout)}return{subscribe:e,close:v,trigger:s=>{const n=oe();return f(l=>{s&&s.callback&&s.callback({id:n,status:"queued"}),s.hideDismiss&&(s.autohide=!0);const u={...ne,...s,id:n};return u.timeoutId=b(u),l.push(u),l}),n},freeze:s=>f(n=>(n.length>0&&clearTimeout(n[s].timeoutId),n)),unfreeze:s=>f(n=>(n.length>0&&(n[s].timeoutId=b(n[s])),n)),clear:()=>t([])}}const A={};function Q(e){return e==="local"?localStorage:sessionStorage}function D(e,t,f){const v=JSON,b="local";function s(n,l){Q(b).setItem(n,v.stringify(l))}if(!A[e]){const n=U(t,d=>{const m=Q(b).getItem(e);m&&d(v.parse(m));{const $=r=>{r.key===e&&d(r.newValue?v.parse(r.newValue):null)};return window.addEventListener("storage",$),()=>window.removeEventListener("storage",$)}}),{subscribe:l,set:u}=n;A[e]={set(d){s(e,d),u(d)},update(d){const m=d(P(n));s(e,m),u(m)},subscribe:l}}return A[e]}D("modeOsPrefers",!1);D("modeUserPrefers",void 0);D("modeCurrent",!1);const j="(prefers-reduced-motion: reduce)";function se(){return window.matchMedia(j).matches}const he=N(se(),e=>{{const t=v=>{e(v.matches)},f=window.matchMedia(j);return f.addEventListener("change",t),()=>{f.removeEventListener("change",t)}}});export{pe as a,le as d,ce as e,de as f,we as g,me as i,ee as o,he as p,te as s,fe as u};
